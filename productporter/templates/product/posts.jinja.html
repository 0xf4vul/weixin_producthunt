{% set page_title = "Posts" %}

{% extends theme("layout.jinja.html") %}
{% from theme("macros.jinja.html") import render_field %}
{% block content %}

<ul class="breadcrumb">
    <li>{{ day }} - Totally {{ post_count }} products</li>
</ul>

<table class="table table-bordered">
    <thead>
        <tr>
            <th>#</th>
            <th>Name</th>
            <th>Tagline</th>
        </tr>
    </thead>
    <tbody>
        {% for post in posts %}
        <tr>
            <td rowspan="3">{{ posts.index(post) + 1 }}</td>
            <td><a href="{{ post.redirect_url }}">{{ post.name }}</a></td>
            <td>{{ post.tagline }}</td>
        </tr>
        <tr>
            <td colspan="2">
                <div class="tagline-translate" data-postid="{{post.postid}}">
                    {{ form.hidden_tag() }}
                    {{ render_field(form.ctagline, rows=2, postid=post.postid) }}
                    <br/>
                    <button class="btn btn-success btn-translate" data-postid="{{post.postid}}">Submit</button>
                </div>
                <div class="tagline-content" data-postid="{{post.postid}}">
                    {% if post.ctagline %}
                        <div class="tagline-content-data" data-postid="{{post.postid}}">
                        {{ post.ctagline }}
                        </div>
                        <button class="btn btn-primary btn-translate" data-postid="{{post.postid}}">I want Review</a>
                    {% else %}
                        <button class="btn btn-primary btn-translate" data-postid="{{post.postid}}">I want Translate</a>
                    {% endif %}
                </div>
            </td>
        </tr>
        <tr>
            <td colspan="2" align="center">
                <img src="{{ post.screenshot_url }}" width="600"/>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% endblock %}

{% block scripts %}
    <script type="text/javascript" src="{{ url_for('static', filename='js/product.js') }}"></script>
{% endblock %}

