{% set page_title = "Posts" %}

{% extends theme("layout.jinja.html") %}
{% from theme("macros.jinja.html") import render_field %}

{% block custcss %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/datepicker3.css') }}">
{% endblock %}

{% block content %}

<div class="panel panel-success">
    <div class="panel-heading">
        <h3 class="panel-title">{{ day }}</h3>
    </div>
    <div class="panel-body">
        <div class="row">
            <div id="input-select-day" class="col-md-2">
                <input type="text" type="text" class="form-control" value="{{ day }}">
            </div>
            <div class="col-md-8">
                <h4>Totally {{ post_count }} products</h4>
            </div>
<!--
            <div class="col-md-2">
                <button id="btn-show-screenshot" type="button" class="btn btn-info">Hide Screenshot</button>
            </div>
-->
        </div>
    </div>
</div>

<table class="table table-bordered">
    <thead>
        <tr>
            <th>#</th>
            <th>Name</th>
            <th>Tagline</th>
        </tr>
    </thead>
    <tbody>
        {% for post in posts %}
        <tr>
            <td class="post-index" rowspan="2">{{ posts.index(post) + 1 }}</td>
            <td>
                <a href="{{ post.redirect_url }}">{{ post.name }}</a>
                <button name="translate" type="button" class="btn btn-success"
                        data-postid="{{post.postid}}">I want Translate</button>
            </td>
            <td>{{ post.tagline }}</td>
        </tr>
        <tr>
            <td colspan="2">
                <div class="tagline-translate" data-postid="{{post.postid}}">
                    <div class="form-horizontal">
                        {{ form.hidden_tag() }}
                        {{ render_field(form.ctagline, div_class="col-sm-12", rows=10, postid=post.postid) }}
                        <button name="commit-translate" type="button" class="btn btn-success"
                            data-postid="{{post.postid}}">Submit</button>
                        <button name="cancel" type="button" class="btn btn-danger"
                            data-postid="{{post.postid}}">Cancel</button>
                    </div>
                </div>
                <div class="tagline-content" data-postid="{{post.postid}}">
                    <div class="tagline-content-data" data-postid="{{post.postid}}">
                        {% autoescape false %}
                        {{ post.ctagline|markup }}
                        {% endautoescape %}
                    </div>

                </div>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% endblock %}

{% block scripts %}
    <script type="text/javascript" src="{{ url_for('static', filename='js/datepicker/bootstrap-datepicker.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='js/product.js') }}"></script>
{% endblock %}

